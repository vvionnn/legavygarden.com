{% extends "base.html" %}
{% block title %}Admin Events | The Legacy Garden{% endblock %}

{% block content %}

<style>

/* ===== Rounded + Soft Shadow (restore nice corners) ===== */
.rounded-box {
    border-radius: 24px;
    box-shadow: 0 12px 30px rgba(0,0,0,0.10);
    background: white;
}

/* ===== Title ===== */
.page-title {
    text-align: center;
    font-size: 1.8rem;
    font-weight: 800;
    color: #4F8A55;
    margin-top: 40px;
    margin-bottom: 35px;
}

/* ===== FORM ===== */
.event-form {
    padding: 30px;
    margin-bottom: 40px;
}

.event-form input,
.event-form textarea,
.event-form select {
    width: 100%;
    padding: 12px;
    margin-bottom: 18px;
    border-radius: 10px;
    border: 1px solid #ddd;
    font-size: 0.95rem;
}

.event-form button {
    background: var(--legacy-green);
    color: white;
    border: none;
    padding: 12px 25px;
    border-radius: 10px;
    font-weight: 700;
    cursor: pointer;
}

/* ===== EVENT CARD ===== */
.event-card {
    padding: 20px;
    margin-bottom: 25px;
    display: flex;
    gap: 20px;
    align-items: center;
}

.event-img {
    width: 180px;
    height: 120px;
    border-radius: 16px;
    object-fit: cover;
    background: #eee;
}

.event-info {
    flex: 1;
}

.event-title {
    font-size: 1.2rem;
    font-weight: 700;
}

.event-meta {
    font-size: 0.9rem;
    color: #666;
    margin: 5px 0 10px;
}

.event-actions {
    display: flex;
    gap: 10px;
}

.btn-edit {
    background: #ffc107;
    border: none;
    padding: 8px 16px;
    border-radius: 10px;
    font-weight: 600;
    cursor: pointer;
}

.btn-delete {
    background: #dc3545;
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 10px;
    font-weight: 600;
    cursor: pointer;
}

</style>


<!-- TITLE OUTSIDE -->
<h2 class="page-title">Manage Events</h2>


<div class="container py-4">

    <!-- ADD EVENT BOX -->
    <div class="rounded-box event-form">

        <form method="POST"
              action="{{ url_for('add_event') }}"
              enctype="multipart/form-data">

            <input type="text" name="title" placeholder="Event Title" required>

            <input type="date" name="event_date" required>

            <input type="file" name="image" accept="image/*" required>

            <textarea name="short_description"
                      placeholder="Short Description"
                      rows="3" required></textarea>

            <textarea name="full_description"
                      placeholder="Full Description"
                      rows="4" required></textarea>

            <select name="status" required>
                <option value="details">Show Details Button</option>
                <option value="upcoming">Show Upcoming Badge</option>
            </select>

            <button type="submit">Add Event</button>
        </form>

    </div>


    <!-- EVENT LIST -->
    {% for event in events %}
    <div class="rounded-box event-card">

        {% if event.image_filename %}
            <img src="{{ url_for('static', filename='uploads/' + event.image_filename) }}"
                 class="event-img">
        {% else %}
            <img src="{{ url_for('static', filename='uploads/default_event.png') }}"
                 class="event-img">
        {% endif %}

        <div class="event-info">
            <div class="event-title">{{ event.title }}</div>
            <div class="event-meta">Date: {{ event.event_date }}</div>
            <div>{{ event.short_description }}</div>

            <div class="event-actions">
                <form method="GET"
                      action="{{ url_for('edit_event', event_id=event.id) }}">
                    <button type="submit" class="btn-edit">Edit</button>
                </form>

                <form method="POST"
                      action="{{ url_for('delete_event_admin', event_id=event.id) }}">
                    <button type="submit" class="btn-delete">Delete</button>
                </form>
            </div>
        </div>

    </div>
    {% else %}
        <p>No events created yet.</p>
    {% endfor %}

</div>

{% endblock %}
